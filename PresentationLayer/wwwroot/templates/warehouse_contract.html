<!doctype html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Hợp đồng dịch vụ kho - {{ContractNumber}}</title>
    <style>
        /* Reset */
        * { box-sizing: border-box; font-family: "Helvetica Neue", Arial, sans-serif; color:#222; }
        body { margin: 0; padding: 20px; font-size: 12px; line-height: 1.45; color: #222; background: #fff; }
        .container { max-width: 800px; margin: 0 auto; }

        header { display:flex; justify-content:space-between; align-items:center; margin-bottom:18px; }
        .logo { width:160px; }
        .meta { text-align:right; font-size:12px; color:#555; }

        h1 { font-size:18px; margin: 6px 0 12px; text-align:center; letter-spacing:0.5px; }
        .small { font-size:11px; color:#666; }

        .section { margin-bottom: 14px; }
        .row { display:flex; gap:12px; }
        .col { flex:1; }

        table { width:100%; border-collapse: collapse; margin-top:8px; }
        th, td { padding:8px 10px; border:1px solid #e2e2e2; text-align:left; vertical-align:top; }
        th { background:#f7f7f7; font-weight:600; }

        .summary { display:flex; justify-content:flex-end; gap:20px; margin-top:8px; }
        .signature { display:flex; justify-content:space-between; margin-top:36px; }
        .sig-box { width:45%; text-align:center; }
        .sig-line { margin-top:60px; border-top:1px solid #999; padding-top:6px; color:#444; }

        footer { margin-top:28px; font-size:11px; color:#666; border-top:1px dashed #ddd; padding-top:8px; }

        /* small print */
        .terms { font-size:11px; color:#333; white-space:pre-wrap; }
    </style>
</head>
<body>
<div class="container">
    <header>
        <div class="logo">
            <!-- bạn có thể đặt base64 hình hoặc url -->
            <img src="{{CompanyLogoUrl}}" alt="logo" style="max-width:160px;"/>
        </div>
        <div class="meta">
            <div><strong>Số hợp đồng:</strong> {{ContractNumber}}</div>
            <div><strong>Ngày:</strong> {{ContractDate}}</div>
            <div><strong>Trạng thái:</strong> {{ContractStatus}}</div>
        </div>
    </header>

    <h1>HỢP ĐỒNG DỊCH VỤ KHO</h1>

    <div class="section">
        <div class="row">
            <div class="col">
                <strong>BÊN A (Bên cung cấp dịch vụ)</strong>
                <div>{{StoreName}}</div>
                <div class="small">{{StoreAddress}}</div>
                <div class="small">Email: {{StoreEmail}} &nbsp; | &nbsp; Điện thoại: {{StorePhone}}</div>
            </div>
            <div class="col">
                <strong>BÊN B (Khách hàng)</strong>
                <div>{{CustomerName}}</div>
                <div class="small">{{CustomerAddress}}</div>
                <div class="small">Email: {{CustomerEmail}} &nbsp; | &nbsp; Điện thoại: {{CustomerPhone}}</div>
            </div>
        </div>
    </div>

    <div class="section">
        <strong>Thông tin báo giá</strong>
        <table>
            <tr>
                <th>Mã báo giá</th>
                <td>{{QuoteCode}}</td>
                <th>Hiệu lực đến</th>
                <td>{{QuotationValidUntil}}</td>
            </tr>
            <tr>
                <th>Tổng tiền</th>
                <td colspan="3">{{TotalAmount}} VND</td>
            </tr>
        </table>
    </div>

    <div class="section">
        <strong>Thông tin kho & vị trí</strong>
        <table>
            <thead>
            <tr>
                <th>Kho</th>
                <th>Mã slot</th>
                <th>Thể tích (m³)</th>
                <th>Giá/giờ</th>
                <th>Thời gian</th>
                <th>Phí</th>
            </tr>
            </thead>
            <tbody>
            {{SlotRows}}
            </tbody>
        </table>
    </div>

    <div class="section">
        <div class="summary">
            <div style="min-width:240px;">
                <table>
                    <tr><th>Tạm tính</th><td>{{Subtotal}} VND</td></tr>
                    <tr><th>VAT ({{VatRate}}%)</th><td>{{VatAmount}} VND</td></tr>
                    <tr><th><strong>Tổng</strong></th><td><strong>{{Total}} VND</strong></td></tr>
                </table>
            </div>
        </div>
    </div>

    <div class="section">
        <strong>Thời hạn hợp đồng</strong>
        <div> Từ: <b>{{StartDate}}</b> &nbsp; — &nbsp; Đến: <b>{{EndDate}}</b> </div>
    </div>

    <div class="section terms">
        <strong>Điều khoản & điều kiện</strong>
        <div>{{TermsAndConditions}}</div>
    </div>

    <div class="signature">
        <div class="sig-box">
            <div><strong>Bên cung cấp</strong></div>
            <div class="sig-line">Ký và ghi rõ họ tên</div>
        </div>
        <div class="sig-box">
            <div><strong>Bên sử dụng</strong></div>
            <div class="sig-line">Ký và ghi rõ họ tên</div>
        </div>
    </div>
    
    <footer>
        Mọi thay đổi phải được lập thành phụ lục và ký xác nhận bởi hai bên. Hợp đồng có hiệu lực kể từ ngày ký.
        
    </footer>
    <button id="downloadPdf">Tải PDF</button>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
    document.getElementById("downloadPdf").addEventListener("click", function () {
        // Chọn container HTML bạn muốn xuất PDF
        var element = document.querySelector(".container");

        var opt = {
            margin:       0.5,
            filename:     'HopDong.pdf',
            image:        { type: 'jpeg', quality: 0.98 },
            html2canvas:  { scale: 2 },
            jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' }
        };

        // Xuất PDF
        html2pdf().set(opt).from(element).save();
    });
</script>
</body>
</html>
