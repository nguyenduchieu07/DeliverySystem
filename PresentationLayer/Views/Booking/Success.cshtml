@model DataAccessLayer.Entities.Order
@{
    ViewData["Title"] = "ƒê∆°n h√†ng ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng";
}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <!-- Success Header -->
            <div class="text-center mb-5">
                <div class="mb-4" style="font-size: 5rem; color: #4caf50;">
                    ‚úÖ
                </div>
                <h1 class="mb-3" style="color: #4caf50;">ƒê∆°n h√†ng ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng!</h1>
                <p class="lead text-muted">
                    C·∫£m ∆°n b·∫°n ƒë√£ s·ª≠ d·ª•ng d·ªãch v·ª• l∆∞u kho c·ªßa ch√∫ng t√¥i.
                </p>
            </div>

            <!-- Order Information Card -->
            <div class="card shadow-sm mb-4" style="border: none; border-radius: 16px;">
                <div class="card-header" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 16px 16px 0 0; padding: 20px;">
                    <h4 class="mb-0">
                        üì¶ Th√¥ng tin ƒë∆°n h√†ng
                    </h4>
                </div>
                <div class="card-body" style="padding: 30px;">
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <h6 class="text-muted mb-2">M√£ ƒë∆°n h√†ng</h6>
                                <p class="mb-0">
                                    <strong style="font-size: 1.2rem; color: #667eea;">ORD@(Model.CreatedAt.ToString("yyyyMMdd"))@(Model.Id.ToString().Substring(0, 8).ToUpper())</strong>
                                    <button class="btn btn-sm btn-outline-secondary ms-2" onclick="copyToClipboard('@Model.Id')" title="Sao ch√©p">
                                        üìã
                                    </button>
                                </p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <h6 class="text-muted mb-2">Tr·∫°ng th√°i</h6>
                                <span class="badge bg-warning" style="font-size: 1rem; padding: 8px 16px;">
                                    @(Model.Status == DataAccessLayer.Enums.StatusValue.Pending ? "‚è≥ ƒêang ch·ªù x√°c nh·∫≠n" :
                                      Model.Status == DataAccessLayer.Enums.StatusValue.Approved ? "‚úÖ ƒê√£ x√°c nh·∫≠n" :
                                      Model.Status == DataAccessLayer.Enums.StatusValue.Completed ? "‚úÖ Ho√†n th√†nh" :
                                      Model.Status == DataAccessLayer.Enums.StatusValue.Canceled ? "‚ùå ƒê√£ h·ªßy" :
                                      Model.Status.ToString())
                                </span>
                            </div>
                        </div>
                    </div>

                    <hr />

                    <!-- Customer Info -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <h5 class="mb-3">üë§ Th√¥ng tin kh√°ch h√†ng</h5>
                            <div class="row">
                                <div class="col-md-4 mb-2">
                                    <strong>H·ªç t√™n:</strong> @(Model.Customer?.FullName ?? "N/A")
                                </div>
                                <div class="col-md-4 mb-2">
                                    <strong>Email:</strong> @(Model.Customer?.Email ?? "N/A")
                                </div>
                                <div class="col-md-4 mb-2">
                                    <strong>S·ªë ƒëi·ªán tho·∫°i:</strong> @(Model.Customer?.PhoneNumber ?? "N/A")
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr />

                    <!-- Address Info -->
                    <div class="row mb-4">
                        <div class="col-md-6 mb-3">
                            <h5 class="mb-3">üìç ƒê·ªãa ch·ªâ nh·∫≠n h√†ng</h5>
                            <p style="line-height: 1.8;">
                                @(Model.PickupAddress?.AddressLine ?? "N/A")<br>
                                @if (Model.PickupAddress != null)
                                {
                                    <small class="text-muted">
                                        @(Model.PickupAddress.Ward), @(Model.PickupAddress.District), @(Model.PickupAddress.City)
                                    </small>
                                }
                            </p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <h5 class="mb-3">üè™ ƒê·ªãa ch·ªâ kho l∆∞u tr·ªØ</h5>
                            <p style="line-height: 1.8;">
                                @(Model.DropoffAddress?.AddressLine ?? "N/A")<br>
                                @if (Model.DropoffAddress != null)
                                {
                                    <small class="text-muted">
                                        @(Model.DropoffAddress.Ward), @(Model.DropoffAddress.District), @(Model.DropoffAddress.City)
                                    </small>
                                }
                            </p>
                        </div>
                    </div>

                    <hr />

                    <!-- Date Info -->
                    <div class="row mb-4">
                        <div class="col-md-6 mb-3">
                            <h5 class="mb-3">üìÖ Th·ªùi gian l∆∞u tr·ªØ</h5>
                            <div class="mb-2">
                                <strong>Ng√†y nh·∫≠p kho:</strong> @(Model.DeliveryDate?.ToString("dd/MM/yyyy") ?? "N/A")
                            </div>
                            <div>
                                <strong>Ng√†y xu·∫•t kho:</strong> @(Model.PickupDate?.ToString("dd/MM/yyyy") ?? "N/A")
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <h5 class="mb-3">üí∞ T·ªïng gi√°</h5>
                            <p style="font-size: 1.5rem; color: #667eea; font-weight: 700;">
                                @(Model.TotalAmount.ToString("N0")) ƒë
                            </p>
                        </div>
                    </div>

                    <hr />

                    <!-- Order Items -->
                    @if (Model.OrderItems != null && Model.OrderItems.Any())
                    {
                        <div class="mb-4">
                            <h5 class="mb-3">üì¶ Danh s√°ch h√†ng h√≥a</h5>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead style="background: #f8f9fa;">
                                        <tr>
                                            <th>T√™n h√†ng</th>
                                            <th>Danh m·ª•c</th>
                                            <th style="text-align: center;">S·ªë l∆∞·ª£ng</th>
                                            <th style="text-align: center;">Tr·ªçng l∆∞·ª£ng (kg)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var item in Model.OrderItems)
                                        {
                                            <tr>
                                                <td>@item.ItemName</td>
                                                <td>@(item.Description ?? "N/A")</td>
                                                <td style="text-align: center;">@item.Quantity</td>
                                                <td style="text-align: center;">@(item.WeightKg?.ToString("N1") ?? "N/A")</td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    }

                    <!-- Note -->
                    @if (!string.IsNullOrWhiteSpace(Model.Note))
                    {
                        <div class="alert alert-info">
                            <strong>üìù Ghi ch√∫:</strong>
                            <div style="white-space: pre-line; margin-top: 8px;">@Model.Note</div>
                        </div>
                    }
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="text-center mb-4">
                <a href="@Url.Action("Detail", "Tracking", new { id = Model.Id })" class="btn btn-primary btn-lg me-3" style="padding: 12px 30px;">
                    üîç Theo d√µi ƒë∆°n h√†ng
                </a>
                <a href="@Url.Action("Index", "Quote")" class="btn btn-outline-primary btn-lg me-3" style="padding: 12px 30px;">
                    üìù ƒê·∫∑t th√™m ƒë∆°n
                </a>
                <a href="@Url.Action("Index", "Home")" class="btn btn-outline-secondary btn-lg" style="padding: 12px 30px;">
                    üè† V·ªÅ trang ch·ªß
                </a>
            </div>

            <!-- Support Information -->
            <div class="text-center mt-5">
                <div class="alert alert-light" style="border: 1px solid #ddd;">
                    <p class="mb-2"><strong>üìû C·∫ßn h·ªó tr·ª£?</strong></p>
                    <p class="mb-0 text-muted">
                        Hotline: <strong>1900 1234</strong> | Email: <strong>support@vcn.vn</strong>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(function() {
            alert('ƒê√£ sao ch√©p m√£ ƒë∆°n h√†ng: ' + text);
        }, function(err) {
            console.error('Failed to copy: ', err);
        });
    }
</script>

<style>
    .card {
        transition: transform 0.2s;
    }
    .card:hover {
        transform: translateY(-2px);
    }
    .btn {
        transition: all 0.3s;
    }
    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
</style>

